{% extends '../index.html'%}
{% load static %}
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container">
  <div class="py-2">
    <h1 class="fw-light">{{post.title}}</h1>
    <h5 class="fw-lighter">20mins ago | {{post.author}} | 5 Comments</h5>
  </div>
  <img src="{% static 'images/img.jpeg'%}" class="card-img-top" alt="image" style="height: 400px; margin: 5px auto;">
  <div class="my-3">
    <p>{{post.post | safe}}</p>
  </div>
  <hr>
  <h2 class="fw-light">Comments</h2>
  {% if comments %}
  {% for comment in comments %}
  <div class="comments p-2 border border-warning rounded">
    <p class="font-weight-bold">
      {{ comment.name }}
      <span class=" text-muted font-weight-normal">
        {{ comment.created_on }}
      </span>
    </p>
    {{ comment.body | linebreaks }}
  </div>
  {% endfor %}
  {% else %}
  <div class="comments p-2 border border-warning rounded">
    <p class="font-weight-bold">
      No comments at the moment.
    </p>
  </div>
  {% endif %}

  <div class="card-body">
    {% if new_comment %}
    <div class="alert alert-success" role="alert">
      Your comment is awaiting moderation
    </div>
    {% else %}
    <h3>Leave a comment</h3>
    <form method="post" style="margin-top: 1.3em;">
      {% csrf_token %}
      {{ comment_form | crispy}}
      <button type="submit" class="btn btn-md btn-outline-primary mb-3">Submit</button>
    </form>
    {% endif %}
  </div>

</div>
{% endblock %}